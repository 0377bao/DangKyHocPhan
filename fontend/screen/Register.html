<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Register</title>
    <link rel="stylesheet" type="text/css" href="../css/Register.css">
    <script src="../js/Home.js"></script>
    <script src="../js/Register.js"></script>
</head>
<body>
    <div class="container">
        <!-- header -->
        <div class="logo-banner">
            <img src="../img/banner.png" alt="banner">
        </div>

        <!-- menu -->
        <div class="menu">
           <!-- Thông tin cá nhân -->

           <div class="menu-personal">
                <p>Xin chào!</p>
                <p><h2>Lê Hữu Bằng</h2></p>
                <p>Giới tính: </p>
                <p>MSSV:</p>
                <p>Trạng thái:</p>

                <button type="submit" onclick="login()">Đăng xuất</button>
           </div>

           <div class="img-avatar">
                <img src="../img/user.png" alt="user">
           </div>
           
           

            <!-- Menu đăng ký học phần -->
            <div class="menu-item">
                <a href="Home.html">THÔNG TIN SINH VIÊN</a> <br>
                <a href="Register.html">ĐĂNG KÝ HỌC PHẦN</a> <br>
                <a href="Curriculum.html">CHƯƠNG TRÌNH KHUNG</a>
            </div>
        </div>

        <!-- content -->
        <div class="content">
            <h2>ĐĂNG KÝ HỌC PHẦN</h2> <br>
            <div class="content-both">
                <!-- Đợi đăng ký -->
                <div class="content-register">
                    <b>Đợt đăng ký</b>

                    <!-- Chọn học kỳ: -->
                    <Select id="semesterSelect" onchange="fetchCourseData()">
                        <option value="1">HK1 (2021- 2022)</option>
                        <option value="2">HK2 (2021- 2022)</option>
                        <option value="3">HK3 (2021- 2022)</option>
                    </Select>


                    <!-- Radio -->
                    <input type="radio" id="hocMoi" name="gender" value="hocMoi" checked>
                    <label for="hocMoi">HỌC MỚI</label>
            
                    <input type="radio" id="hocLai" name="gender" value="hocLai">
                    <label for="hocLai">HỌC LẠI</label>
            
                    <input type="radio" id="hocCaiThien" name="gender" value="hocCaiThien">
                    <label for="hocCaiThien">HỌC CẢI THIỆN</label>
                </div>

                <!-- Mon hoc phần đang chời đang ký -->
                <div class="content-subject">
                    <h3>MÔN HỌC PHẦN ĐANG CHỜ ĐĂNG KÝ</h3>
                    <form action="" class="table-register">
                        <table>
                            <thead>
                                <tr>
                                    <th>ㅤㅤ</th>
                                    <th>STT</th>
                                    <th>Mã MH cũ</th>
                                    <th>Mã HP</th>
                                    <th>Tên môn học</th>
                                    <th>TC</th>
                                    <th>Bắc buộc</th>
                                    <th>Học phần: học trước (a), tiên <br> quyết (b), song hành (c)</th>
                                    <th>Học phần tương đương</th>
                                </tr>
                            </thead>
                            <tbody></tbody>
                        </table>
                    </form>

                </div>

                <div class="content-subject4">
                    <h3>LỚP HỌC PHẦN CHỜ ĐĂNG KÝ</h3>
                    <form action="" class="table-register4">
                        <table>
                            <thead>
                                <tr>
                                    <th>ㅤㅤ</th>
                                    <th>STT</th>
                                    <th>Mã LHP</th>
                                    <th>Tên Lớp học phần</th>
                                    <th>Lớp dự kiến</th>
                                    <th>Sĩ số tối đa</th>
                                    <th>Đã đăng ký</th>
                                    <th>Trạng thái</th>
                                </tr>
                            </thead>
                            <tbody></tbody>
                        </table>
                    </form>

                </div>


                <div class="content-subject1">
                    <h3>CHI TIẾT LỚP HỌC PHẦN</h3>
                    <div class="content-honestly">
                        <label>Nhóm thực hành</label>
                        <Select>
                            <option value="1">ㅤㅤ</option>
                            <option value="2">No results found</option>
                        </Select>
                    </div>
                    <form action="" class="table-register1">
                        <table>
                            <thead>
                                <tr>
                                    <th>STT</th>
                                    <th>Lịch học</th>
                                    <th>Nhóm TH</th>
                                    <th>Phòng</th>
                                    <th>Dãy nhà</th>
                                    <th>Cơ sở</th>
                                    <th>Giảng viên</th>
                                    <th>Thời gian</th>
                                    <th>ㅤㅤ</th>
                                </tr>
                            </thead>
                            <tbody></tbody>
                        </table>
                    </form>

                    <button type="submit" class="register-subject">Đăng ký môn học</button>

                </div>


                <div class="content-subject2">
                    <h3>LỚP HỌC PHẦN ĐÃ ĐĂNG KÝ TRONG KÌ HỌC NÀY</h3>
                    <form action="" class="table-register2">
                        <table>
                            <thead>
                                <tr>
                                    <th>Thao tác</th>
                                    <th>STT</th>
                                    <th>Mã LHP</th>
                                    <th>Tên môn học</th>
                                    <th>Lớp học dự kiến</th>
                                    <th>Số TC</th>
                                    <th>Nhóm TH</th>
                                    <th>Học Phí</th>
                                    <th>Hạn nộp</th>
                                    <th>Thu</th>
                                    <th>Trạng thái ĐK</th>
                                    <th>Ngày Đk</th>
                                    <th>Trạng Thái LHP</th>
                                </tr>
                            </thead>
                            <tbody></tbody>
                        </table>
                    </form>


                </div>

            </div> 
        </div>

         <!-- footer -->
         <div class="footer">
            <div class="left-footer">
                <b>TRƯỜNG ĐẠI HỌC CÔNG NGHIỆP THÀNH PHỐ HỒ CHÍ MINH</b> <br>
                <p>Địa chỉ: 12 Nguyễn Văn Bảo, phường 4, quận Gò Vấp, TP.Hồ Chí Minh </p> 
                <p>Điện thoại: 0283 8940 390 </p>
                <p>Fax: 0283 9940 954 </p> 
                <p>Email: dhcn@iuh.edu.vn</p> 
            </div>
    
            <div class="right-footer">
                <p>Thống kê truy cập</p> 
                <p>Lượt truy cập: 2038569</p> 
                <p>Đang online: 345</p>
            </div>
        </div>

        <div class="footer-butoom">
            <p>Bảng quyền 2018 - Trường Đại học Công nghiệp TP. Hồ Chí Minh</p>
           
        </div>

    </div>

    <script>
        function login() {
            // Thực hiện xử lý đăng nhập ở đây nếu cần
    
            // Chuyển hướng sang trang Home.html
            window.location.href = "LoginRegister.html";
        }
            document.addEventListener("DOMContentLoaded", function() {
                fetchCourseData(); // Initial fetch for course data
                fetchEnrollmentData(); // You might call this here if needed initially
            });
            
            // Fetch initial course data
            function fetchCourseData() {
                const semesterId = document.getElementById('semesterSelect').value;
                fetch(`http://localhost:8080/api/dkhp/CourseOpening/${semesterId}`)
                    .then(response => response.json())
                    .then(data => updateCoursesTable(data.data.dsKhoaHoc))
                    .catch(error => console.error('Error fetching course data:', error));
            }
            
            // Update the course table with fetched data
            function updateCoursesTable(courses) {
                const tbody = document.querySelector('.table-register tbody');
                tbody.innerHTML = '';
                courses.forEach((course, index) => {
                    const row = document.createElement('tr');
                    row.innerHTML = `
                        <td><input type="radio" name="courseSelection" onclick="fetchCourseDetails(${course.id})"></td>
                        <td>${index + 1}</td>
                        <td>${course.id}</td>
                        <td>${course.id}</td>
                        <td>${course.tenMonHoc}</td>
                        <td>${course.soTinChi}</td>
                        <td><img src="../img/check.png" alt=""></td>
                        <td>${course.monTienQuyet.join(', ') || 'None'}</td>
                        <td></td>
                    `;
                    tbody.appendChild(row);
                });
            }
            
            // Fetch specific course details
            function fetchCourseDetails(courseId) {
                fetch(`http://localhost:8080/api/admin/clazz/1`) //${courseId}
                    .then(response => response.json())
                    .then(data => updateCourseDetailsTable(data.data))
                    .catch(error => console.error('Error fetching course details:', error));
            }
            
            // Update the course details table with fetched details
            function updateCourseDetailsTable(details) {
                const tbody = document.querySelector('.table-register4 tbody');
                tbody.innerHTML = ''; // Clear previous entries
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td><input type="radio" name="courseSelection" "></td>
                    <td>1</td>
                    <td>${details.maLop}</td>
                    <td>Giáo dục Quốc phòng và An ninh 1 </td>  
                    <td>DHTH16C</td>
                    <td>${details.siSoToiDa}</td>
                    <td>40</td>
                    <td>Chấp nhận mở lớp</td>
                `;
                tbody.appendChild(row);
                 //${details.tenLopHocPhan}
                 //${details.tenLopHocPhan}
                 //${details.siSoHienTai}
                 //${details.trangThaiLop}
            }
            
    </script>
</body>
</html>